<% layout('./layouts/boilerplate.ejs') -%>
    <style>
            .filters{
               display: flex;
               flex-wrap: wrap;
               align-items: center;
            }
            .filter{
               text-align: center;
               margin-top: 1.5rem;
               margin-right: 2rem;
               opacity: 0.7;
               
            }
            .filter p{
               font-size: 0.8rem;
            }
           
            .filters a{
               text-decoration: none;
               color: black;
               opacity: 0.7;
            }
            .filters a:hover{
               opacity: 1;
            }
            .tax-info{
               display: none;
            }
            .tax-toggle{
               border: 1px solid black;
               height: 2.5rem;
               border-radius: 0.7rem;
               padding: 1rem;
               font-size: 0.8rem;
               margin-left: 9rem;
               display: flex;
               align-items: center;
               cursor: pointer;
            }
            .form-check-input{
               cursor: pointer;
            }
            
    </style>
   
      <!-- <h2 class="mb-3 mt-3" style="margin-left: 1.8rem;">All Listings</h2> -->
      <!-- <form action="listings/new" method="get">
         <button>create new listing</button>
      </form> -->
      <div class="filters">
         <a href="/category/Trending">        
            <div class="filter">
            <div><i class="fa-solid fa-fire"></i></div>
            <p>Trending</p>
            </div>
         </a>
         <a href="/category/Rooms">
            <div class="filter">
               <div><i class="fa-solid fa-bed"></i></div>
               <p>Rooms</p>
            </div>
         </a>
         <a href="/category/Iconic cities">
            <div class="filter">
               <div><i class="fa-solid fa-mountain-city"></i></div>
               <p>Iconic cities</p>
            </div>
         </a>
         <a href="/category/Mountains">
            <div class="filter">
               <div><i class="fa-solid fa-mountain"></i></div>
               <p>Mountains</p>
            </div>
         </a>
         <a href="/category/Castles">
            <div class="filter">
               <div><i class="fa-brands fa-fort-awesome"></i></div>
               <p>Castles</p>
            </div>
         </a>
         <a href="/category/Amazing pools">
            <div class="filter">
               <div><i class="fa-solid fa-bed"></i></div>
               <p>Amazing pools</p>
            </div>
         </a>
        <a href="/category/Camping">
         <div class="filter">
            <div><i class="fa-solid fa-campground"></i></div>
            <p>Camping</p>
         </div>
        </a>
         <a href="/category/Farms">
            <div class="filter">
               <div><i class="fa-solid fa-cow"></i></div>
               <p>Farms</p>
            </div>
         </a>
        <a href="/category/Arctic">
         <div class="filter">
            <div><i class="fa-solid fa-snowflake"></i></div>
            <p>Arctic</p>
         </div>
        </a>
      <div class="tax-toggle">
         <div class="form-check-reverse form-switch">
            <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault">
            <label class="form-check-label" for="flexSwitchCheckDefault">Display total with tax</label>
         </div>
      </div>
      </div>
      <ul>
         <div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1 mt-2">
            <% for(listing of allListings){%>
             <a href="/listings/<%=listing._id%>" class="listing-link">
               <div class="card listing-card">
                  <img src="<%=listing.image.url %>" class="card-img-top" alt="listing  image">
                  <div class="card-img-overlay">abc</div>
                  <div class="card-body">
                     <p class="card-text">
                       <b><%=listing.title %> <br></b>
                        &#8377; <%=listing.price.toLocaleString("en-IN")%> /night
                        <i class="tax-info"> &nbsp; &nbsp; + 18% GST</i>
                     </p>
                  </div>
               </div>
            </a>
               <%}%>
         </div>
        

      </ul>
     <script>
         let taxSwitch=document.getElementById("flexSwitchCheckDefault");
         taxSwitch.addEventListener("click",()=>{
           let taxInfo=document.getElementsByClassName("tax-info");
            for(info of taxInfo)
            {
               if(info.style.display!="inline")
               {
                  info.style.display="inline";
               }else{
                  info.style.display="none";
               }
               
            }
         })
     </script>